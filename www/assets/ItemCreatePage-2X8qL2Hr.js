import{r as t,G as v,j as e,T as o,B as n,a1 as I,a8 as Oe,ad as ue,ac as qe,am as ge,ae as T,ak as se,an as He,ar as Ze,as as Je,ap as W,n as pe,R as Vs,H as Os,at as qs,au as Hs,f as Zs,h as Js,a2 as Qs,F as Qe,I as Xs,X as Ys,O as te,J as Xe,K as Ye,av as Ue,y as ie,$ as he,af as es,aw as ss}from"./index-Cr_aSuNE.js";import{M as ts,B as Us,D as et}from"./MultiImageUpload-DylqVYMt.js";import{A as me,a as xe,b as fe}from"./AccordionSummary-BTDKqR1i.js";import{P as is}from"./phone-BKlH-z8A.js";import{G as st}from"./gift-C6oOSMs6.js";import{C as ns}from"./calendar-CRxPvv7E.js";import{C as tt}from"./Collapse-DR9hVEqK.js";import{S as it}from"./star-DmQVCCzy.js";const nt=()=>{const[x,u]=t.useState(null),[_,N]=t.useState(!0);t.useEffect(()=>{R()},[]);const R=async()=>{try{const{data:p,error:z}=await v.from("token_conversion_settings").select("setting_key, setting_value");if(z)throw z;const j={geminiTokensPerCredit:250,manualListingCost:0,minCreditsForAI:1};p==null||p.forEach(a=>{const k=parseInt(a.setting_value);a.setting_key==="gemini_tokens_per_credit"?j.geminiTokensPerCredit=k:a.setting_key==="manual_listing_cost"?j.manualListingCost=k:a.setting_key==="min_credits_for_ai"&&(j.minCreditsForAI=k)}),u(j)}catch(p){console.error("Error fetching token conversion settings:",p),u({geminiTokensPerCredit:250,manualListingCost:0,minCreditsForAI:1})}finally{N(!1)}},P=t.useCallback(p=>{if(!x)return{geminiTokens:0,estimatedCredits:0,isFree:!0};if(p===0)return{geminiTokens:0,estimatedCredits:x.manualListingCost,isFree:x.manualListingCost===0};const z=Math.ceil(p/x.geminiTokensPerCredit),j=Math.max(z,x.minCreditsForAI);return{geminiTokens:p,estimatedCredits:j,isFree:!1}},[x]),w=t.useCallback(async(p,z,j,a,k)=>{try{const{data:f,error:F}=await v.rpc("deduct_credits_for_ai",{p_user_id:p,p_item_id:z,p_gemini_input_tokens:j,p_gemini_output_tokens:a,p_description:k});if(F)throw F;const y=(f==null?void 0:f[0])||f;if(!y)throw new Error("No result from deduct_credits_for_ai function");return{success:y.success,newBalance:y.new_balance,creditsUsed:y.credits_used,error:y.error_message||void 0}}catch(f){return console.error("Error deducting credits:",f),{success:!1,newBalance:0,creditsUsed:0,error:f instanceof Error?f.message:"Failed to deduct credits"}}},[]);return{settings:x,loading:_,calculateCreditsFromTokens:P,deductCreditsForAI:w,refetch:R}},rt=({pickupAddress:x,shippingEnabled:u,shippingCostType:_,shippingCostFixed:N,shippingDescription:R,priceNegotiable:P,isFree:w,duration:p,onShippingEnabledChange:z,onShippingCostTypeChange:j,onShippingCostFixedChange:a,onShippingDescriptionChange:k,onPriceNegotiableChange:f,onIsFreeChange:F,onDurationChange:y,pickupEnabled:B,onPickupEnabledChange:Q,phoneVisible:V=!1})=>{const O=()=>u?_==="free"?"Kostenlos":_==="fixed"?`‚Ç¨${N.toFixed(2)}`:"KI-berechnet":"Nicht verf√ºgbar";return e.jsxs(me,{sx:{mt:3,border:"1px solid",borderColor:"divider",borderRadius:2,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsxs(xe,{expandIcon:e.jsx(ge,{size:20}),sx:{"& .MuiAccordionSummary-content":{display:"flex",flexDirection:"column",gap:1.5}},children:[e.jsx(o,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:"Artikel-Einstellungen"}),e.jsxs(n,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[B&&e.jsx(I,{icon:e.jsx(Oe,{size:14}),label:x?`Abholung: ${x}`:"Abholung m√∂glich",size:"small",sx:{fontSize:"0.75rem"}}),B&&V&&e.jsx(I,{icon:e.jsx(is,{size:14}),label:"Tel. sichtbar",size:"small",color:"info",sx:{fontSize:"0.75rem"}}),e.jsx(I,{icon:e.jsx(ue,{size:14}),label:`Versand: ${O()}`,size:"small",color:u?"primary":"default",sx:{fontSize:"0.75rem"}}),w&&e.jsx(I,{icon:e.jsx(st,{size:14}),label:"Zu verschenken",size:"small",color:"success",sx:{fontSize:"0.75rem"}}),!w&&P&&e.jsx(I,{icon:e.jsx(qe,{size:14}),label:"VB",size:"small",sx:{fontSize:"0.75rem",fontWeight:700,bgcolor:"warning.main",color:"white"}}),e.jsx(I,{icon:e.jsx(ns,{size:14}),label:`${p} Tage`,size:"small",sx:{fontSize:"0.75rem"}})]})]}),e.jsx(fe,{sx:{pt:2,borderTop:"1px solid",borderColor:"divider"},children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(n,{children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Oe,{size:16}),"Abholung"]}),e.jsx(T,{control:e.jsx(se,{checked:B,onChange:g=>Q(g.target.checked),size:"small"}),label:"Abholung aktivieren"}),B&&e.jsxs(n,{sx:{mt:1,ml:4},children:[e.jsxs(o,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:["üìç ",x||"Keine Adresse ausgew√§hlt"]}),V&&e.jsxs(o,{variant:"caption",color:"info.main",sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:[e.jsx(is,{size:12})," Telefonnummer wird im Inserat angezeigt"]}),!V&&x&&e.jsx(o,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"üîí Telefonnummer wird nicht angezeigt"})]})]}),e.jsxs(n,{children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(ue,{size:16}),"Versand"]}),e.jsx(T,{control:e.jsx(se,{checked:u,onChange:g=>z(g.target.checked),size:"small"}),label:"Versand aktivieren",sx:{mb:2}}),u&&e.jsxs(n,{sx:{ml:4,display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(He,{fullWidth:!0,size:"small",children:[e.jsx(Ze,{children:"Versandkosten"}),e.jsxs(Je,{value:_,label:"Versandkosten",onChange:g=>j(g.target.value),children:[e.jsx(W,{value:"ai_calculated",children:"KI-berechnet"}),e.jsx(W,{value:"fixed",children:"Festpreis"}),e.jsx(W,{value:"free",children:"Kostenlos"})]})]}),(_==="fixed"||_==="ai_calculated")&&e.jsx(pe,{fullWidth:!0,size:"small",type:"number",label:_==="ai_calculated"?"Versandkosten (‚Ç¨) - Manuell festlegen":"Versandkosten (‚Ç¨)",value:N,onChange:g=>a(Number(g.target.value)),inputProps:{min:0,step:.5},helperText:_==="ai_calculated"?"Im manuellen Modus wird keine KI-Berechnung durchgef√ºhrt":void 0}),k&&e.jsx(pe,{fullWidth:!0,size:"small",multiline:!0,rows:2,label:"Versandinformationen (optional)",value:R||"",onChange:g=>k(g.target.value),placeholder:"z.B. Versand mit DHL, 1-3 Werktage"})]})]}),e.jsxs(n,{children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(qe,{size:16}),"Preis"]}),e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[e.jsx(T,{control:e.jsx(se,{checked:w,onChange:g=>{F(g.target.checked),g.target.checked&&f(!1)},size:"small"}),label:e.jsxs(n,{children:[e.jsx(o,{variant:"body2",children:"Zu verschenken"}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"Artikel kostenlos abgeben"})]})}),!w&&e.jsx(T,{control:e.jsx(se,{checked:P,onChange:g=>f(g.target.checked),size:"small"}),label:e.jsxs(n,{children:[e.jsx(o,{variant:"body2",children:"Verhandlungsbasis (VB)"}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"Preis ist verhandelbar"})]})})]})]}),e.jsxs(n,{children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(ns,{size:16}),"Laufzeit"]}),e.jsxs(He,{fullWidth:!0,size:"small",children:[e.jsx(Ze,{children:"Anzeigedauer"}),e.jsxs(Je,{value:p,label:"Anzeigedauer",onChange:g=>y(Number(g.target.value)),children:[e.jsx(W,{value:7,children:"7 Tage"}),e.jsx(W,{value:14,children:"14 Tage"}),e.jsx(W,{value:30,children:"30 Tage"}),e.jsx(W,{value:60,children:"60 Tage"}),e.jsx(W,{value:90,children:"90 Tage"})]})]}),e.jsx(o,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:"Das Inserat wird nach Ablauf automatisch deaktiviert"})]})]})})]})},xt=()=>{var Ge;const x=Vs(),{user:u}=Os(),{personalCredits:_}=qs(),{checkCredit:N,consumeCredit:R}=Hs(),{calculateCreditsFromTokens:P,deductCreditsForAI:w,settings:p}=nt(),z=Zs(),j=Js(z.breakpoints.down("sm")),[a,k]=t.useState([]),[f,F]=t.useState("upload"),[y,B]=t.useState(!1),[Q,V]=t.useState(""),[O,g]=t.useState(!1),[ne,be]=t.useState(!1),[_e,rs]=t.useState(!1),[re,je]=t.useState(30),[L,Ce]=t.useState(!1),[oe,ye]=t.useState(!1),[K,os]=t.useState(null),[ke,M]=t.useState(""),[ae,Se]=t.useState(0),[X,as]=t.useState([]),[q,ls]=t.useState(""),[$,cs]=t.useState(null),[ze,ve]=t.useState(!1),[ds,hs]=t.useState(!1),[le,Ie]=t.useState(""),[ce,we]=t.useState(""),[de,Ae]=t.useState(""),[us,gs]=t.useState(""),[ps,ms]=t.useState(""),[xs,fs]=t.useState(""),[bs,_s]=t.useState([]),[js,Cs]=t.useState(""),[ys,ks]=t.useState(""),[Ss,zs]=t.useState(""),[vs,Is]=t.useState(""),[ws,As]=t.useState(""),[Es,Ws]=t.useState(""),[Ps,Fs]=t.useState([]),[Bs,Ms]=t.useState(""),[Ds,Ns]=t.useState(""),[Ee,We]=t.useState(!1),[Pe,Fe]=t.useState("free"),[Be,Me]=t.useState(0),[De,Ne]=t.useState(""),[Re,Le]=t.useState(!1),[Rs,Ls]=t.useState(!1),[ot,Ks]=t.useState("");t.useEffect(()=>{if(!u){x("/");return}(async()=>{try{const[h,r,S]=await Promise.all([v.from("addresses").select("*").eq("user_id",u.id).order("is_default_shipping",{ascending:!1}),v.from("profiles").select("shipping_enabled, shipping_cost, shipping_cost_type, shipping_description, pickup_enabled, show_location_publicly, location_description, ai_analyze_all_images").eq("id",u.id).maybeSingle(),v.from("items").select("id",{count:"exact",head:!0}).eq("user_id",u.id)]);if(h.data){as(h.data);const l=h.data.filter(C=>C.address_type==="pickup_only"||C.address_type==="both"),A=l.find(C=>C.is_default_shipping)||l[0];A&&ls(A.id)}r.data&&(cs(r.data),r.data.shipping_enabled&&We(r.data.shipping_enabled),r.data.shipping_cost_type&&Fe(r.data.shipping_cost_type),r.data.shipping_cost&&Me(r.data.shipping_cost),r.data.shipping_description&&Ne(r.data.shipping_description),r.data.pickup_enabled&&Le(r.data.pickup_enabled),r.data.show_location_publicly!==void 0&&Ls(r.data.show_location_publicly),r.data.location_description&&Ks(r.data.location_description));const c=(S.count||0)===0;hs(c),ve(c)}catch(h){console.error("Error loading data:",h)}})()},[u,x]),t.useEffect(()=>{a.length>0&&f==="upload"&&F("choose")},[a,f]),t.useEffect(()=>{var i;if(p&&K){const h=((i=K.tokenUsage)==null?void 0:i.totalTokens)||0,r=P(h);Se(r.estimatedCredits)}else Se(0)},[K,p,P]);const $s=async(i,h,r)=>{const{data:{session:S}}=await v.auth.getSession(),b=S==null?void 0:S.access_token;if(!b)throw new Error("Keine Authentifizierung vorhanden");const l={Deutschland:"DE",√ñsterreich:"AT",Schweiz:"CH",Frankreich:"FR",Italien:"IT",Spanien:"ES",Niederlande:"NL",Belgien:"BE",Polen:"PL",Tschechien:"CZ"}[h]||"DE",A=await fetch("https://hsbjflixgavjqxvnkivi.supabase.co/functions/v1/analyze-image",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({imageData:i,shippingCountry:l,additionalNotes:r})}),C=await A.json();if(!A.ok)throw C.insufficientTokens?new Error(`Nicht gen√ºgend Tokens. Du hast ${C.currentBalance} Tokens, ben√∂tigt wird ${C.required}.`):new Error(C.error||"Analyse fehlgeschlagen");return C},Ke=async()=>{if(!(a.length===0||!u)){Ce(!0),M("");try{console.log("Starting AI analysis...");const i=X.find(l=>l.id===q),h=(i==null?void 0:i.country)||ss(),S=($==null?void 0:$.ai_analyze_all_images)??!1?a:[a.find(l=>l.isPrimary)||a[0]];console.log("Analyzing images:",S.length);const b=await Promise.all(S.map(l=>$s(l.preview,h,Q)));console.log("Analysis complete:",b);const c=b[0];b.length>1&&b.slice(1).forEach(l=>{l.features&&(c.features=[...c.features||[],...l.features]),l.colors&&(c.colors=[...new Set([...c.colors||[],...l.colors])]),l.accessories&&(c.accessories=[...c.accessories||[],...l.accessories]),l.tags&&(c.tags=[...new Set([...c.tags||[],...l.tags])])}),os(c),Ie(c.title),we(c.description),Ae(c.price.toString()),console.log("Publishing item with data:",c),await $e(c),console.log("Item published successfully")}catch(i){console.error("Error in handleAIGenerate:",i),M(i instanceof Error?i.message:"Analyse fehlgeschlagen")}finally{Ce(!1)}}},$e=async i=>{var c,l,A,C,Te;if(!u)return;const h=(i==null?void 0:i.title)||le,r=(i==null?void 0:i.description)||ce,S=(i==null?void 0:i.price)||parseFloat(de);if(!h||!r||!S)return;if(!u.email_confirmed_at){M("Bitte best√§tigen Sie zuerst Ihre E-Mail-Adresse.");return}console.log("[Credit Check] Checking credits before listing creation...");const b=await N();if(console.log("[Credit Check] Result:",b),!b.canCreate){M(b.message||"Du kannst derzeit kein Inserat erstellen. Bitte spende oder kaufe Credits.");return}ye(!0),M("");try{const E=[];for(const m of a){const Y=m.file.name.split(".").pop(),U=`${u.id}/${Date.now()}-${m.id}.${Y}`,{error:G}=await v.storage.from("item-images").upload(U,m.file);if(G)throw G;const{data:{publicUrl:ee}}=v.storage.from("item-images").getPublicUrl(U);E.push(ee)}const d=X.find(m=>m.id===q),Gs={Deutschland:"DE",√ñsterreich:"AT",Schweiz:"CH",Frankreich:"FR",Italien:"IT",Spanien:"ES",Niederlande:"NL",Belgien:"BE",Polen:"PL",Tschechien:"CZ"}[(d==null?void 0:d.country)||ss()]||"DE",Ts=E[a.findIndex(m=>m.isPrimary)]||E[0],s=i||K,H=((c=s==null?void 0:s.tokenUsage)==null?void 0:c.inputTokens)||0,Z=((l=s==null?void 0:s.tokenUsage)==null?void 0:l.outputTokens)||0,J=H+Z;console.log("[Item Insert] Gemini Tokens:",{input:H,output:Z,total:J,hasTokenUsage:!!(s!=null&&s.tokenUsage)});const{data:D,error:Ve}=await v.from("items").insert({user_id:u.id,title:h,description:r,price:S,image_url:Ts,status:y?"published":"draft",ai_generated:s!==null,category:s==null?void 0:s.category,subcategory:s==null?void 0:s.subcategory,condition:s==null?void 0:s.condition,brand:s==null?void 0:s.brand,size:s==null?void 0:s.size,weight:s==null?void 0:s.weight,dimensions_length:(A=s==null?void 0:s.dimensions)==null?void 0:A.length,dimensions_width:(C=s==null?void 0:s.dimensions)==null?void 0:C.width,dimensions_height:(Te=s==null?void 0:s.dimensions)==null?void 0:Te.height,material:s==null?void 0:s.material,colors:s==null?void 0:s.colors,style:s==null?void 0:s.style,serial_number:s==null?void 0:s.serialNumber,features:s==null?void 0:s.features,accessories:s==null?void 0:s.accessories,tags:s==null?void 0:s.tags,postal_code:d==null?void 0:d.postal_code,location:d==null?void 0:d.city,estimated_weight_kg:s==null?void 0:s.estimated_weight_kg,package_dimensions:s==null?void 0:s.package_dimensions,ai_shipping_domestic:s==null?void 0:s.ai_shipping_domestic,ai_shipping_international:s==null?void 0:s.ai_shipping_international,selected_address_id:q||null,shipping_from_country:Gs,snapshot_shipping_enabled:Ee,snapshot_shipping_cost:Be,snapshot_shipping_cost_type:Pe,snapshot_shipping_description:De||null,snapshot_pickup_enabled:Re,snapshot_show_location_publicly:Rs,price_negotiable:O,is_free:ne,price_on_request:_e,duration_days:re,snapshot_pickup_address:d==null?void 0:d.address,snapshot_pickup_postal_code:d==null?void 0:d.postal_code,snapshot_pickup_city:d==null?void 0:d.city,snapshot_pickup_country:d==null?void 0:d.country,snapshot_location_description:($==null?void 0:$.location_description)||null,gemini_input_tokens:H,gemini_output_tokens:Z,gemini_tokens_used:J}).select().single();if(Ve)throw Ve;if(console.log("Item created:",D),E.length>0&&D){const m=E.map((U,G)=>{var ee;return{item_id:D.id,image_url:U,display_order:G,is_primary:((ee=a[G])==null?void 0:ee.isPrimary)||G===0}});console.log("Inserting item images:",m.length);const{error:Y}=await v.from("item_images").insert(m);if(Y)throw Y;console.log("Images inserted successfully")}if(console.log("[Credit Check] Processing credit deduction...",{creditSource:b.source,geminiTokens:J,aiGenerated:s!==null}),J>0){console.log("[Credit Check] AI listing detected - deducting credits based on Gemini tokens...");const m=await w(u.id,D.id,H,Z,`AI listing creation: ${h}`);if(!m.success){console.error("[Credit Check] Failed to deduct credits:",m.error),M(m.error||"Fehler beim Abziehen der Credits");return}console.log("[Credit Check] Credits deducted successfully:",{creditsUsed:m.creditsUsed,newBalance:m.newBalance,geminiInputTokens:H,geminiOutputTokens:Z,totalTokens:J})}else b.source==="community_pot"?(console.log("[Credit Check] Manual listing using community pot (free listing)"),await R(b.source,D.id)||console.error("[Credit Check] Failed to consume community pot credit")):console.log("[Credit Check] Manual listing with personal credits - FREE (0 credits)");console.log("Navigating to:",`/item/${D.id}`),x(`/item/${D.id}`)}catch(E){M(E instanceof Error?E.message:"Upload fehlgeschlagen")}finally{ye(!1)}};return e.jsxs(Qs,{maxWidth:"md",sx:{py:4,pb:12},children:[e.jsxs(n,{sx:{mb:5,textAlign:"center"},children:[e.jsx(o,{variant:"h4",sx:{fontWeight:700,color:"primary.main",fontSize:{xs:"1.75rem",md:"2.25rem"},letterSpacing:"-0.02em",mb:1},children:"Artikel erstellen"}),e.jsx(o,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.95rem",maxWidth:"500px",mx:"auto"},children:"Lade deine Bilder hoch und lass die KI die Arbeit machen"})]}),ke&&e.jsx(Qe,{severity:"error",sx:{mb:3},children:ke}),ze&&ds&&e.jsx(tt,{in:ze,children:e.jsx(Qe,{severity:"info",icon:e.jsx(te,{size:20}),action:e.jsx(Xs,{size:"small",onClick:()=>ve(!1),sx:{color:"inherit"},children:e.jsx(Ys,{size:18})}),sx:{mb:3,backgroundColor:"rgba(16, 185, 129, 0.08)",borderColor:"#10b981",border:"1px solid","& .MuiAlert-icon":{color:"#10b981"}},children:e.jsxs(n,{children:[e.jsx(o,{variant:"subtitle2",sx:{fontWeight:600,mb:.5,color:"#047857"},children:"üí° Willkommen! Ihr erster Artikel"}),e.jsx(o,{variant:"body2",sx:{color:"text.secondary",mb:1},children:"Laden Sie einfach Fotos hoch - unser KI-Assistent analysiert die Bilder automatisch und schl√§gt Titel, Beschreibung, Preis und weitere Details vor."}),e.jsxs(o,{variant:"caption",sx:{color:"text.secondary",display:"block"},children:["Sie k√∂nnen die KI-Einstellungen jederzeit unter ",e.jsx("strong",{children:"Profil ‚Üí Einstellungen ‚Üí KI-Assistent"})," anpassen."]})]})})}),a.length===0?e.jsx(ts,{images:a,onImagesChange:k}):e.jsxs(Xe,{sx:{p:{xs:2,md:3},borderRadius:3,mb:3},children:[e.jsx(ts,{images:a,onImagesChange:k}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{sx:{mt:3,p:2.5,border:"2px solid",borderColor:"primary.main",borderRadius:2,bgcolor:"rgba(25, 118, 210, 0.02)"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.5,flexWrap:"wrap",gap:1},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{size:18,style:{color:"#1976d2"}}),e.jsx(o,{variant:"subtitle2",sx:{fontWeight:600,color:"primary.main"},children:"KI-Unterst√ºtzung"})]}),e.jsxs(n,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[K&&e.jsx(I,{icon:e.jsx(Ye,{size:14}),label:`${((Ge=K.tokenUsage)==null?void 0:Ge.totalTokens)||0} Gemini Tokens`,size:"small",variant:"outlined",color:"info",sx:{fontWeight:600}}),ae>0?e.jsx(I,{icon:e.jsx(Ue,{size:14}),label:`‚âà${ae} Credits`,size:"small",variant:"outlined",color:"warning",sx:{fontWeight:600}}):e.jsx(I,{label:"Manuell = KOSTENLOS",size:"small",color:"success",sx:{fontWeight:600}}),e.jsx(I,{icon:e.jsx(Ue,{size:16}),label:`${_} Credits verf√ºgbar`,size:"small",color:_>=ae?"primary":"error",sx:{fontWeight:600}})]})]}),e.jsx(pe,{fullWidth:!0,multiline:!0,rows:3,label:"Zus√§tzliche Informationen f√ºr die KI (optional)",placeholder:"z.B. Erbst√ºck, Notverkauf, versteckte M√§ngel, besondere Merkmale, die auf dem Bild nicht sichtbar sind...",value:Q,onChange:i=>V(i.target.value),helperText:"Diese Informationen helfen der KI, eine bessere Beschreibung und einen realistischeren Preis zu erstellen",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white"}}})]}),e.jsx(rt,{pickupAddress:(()=>{const i=X.find(r=>r.id===q);return i?[i.address,i.postal_code,i.city].filter(Boolean).join(", "):""})(),shippingEnabled:Ee,shippingCostType:Pe,shippingCostFixed:Be,shippingDescription:De,priceNegotiable:O,isFree:ne,duration:re,onShippingEnabledChange:We,onShippingCostTypeChange:Fe,onShippingCostFixedChange:Me,onShippingDescriptionChange:Ne,onPriceNegotiableChange:g,onIsFreeChange:be,onDurationChange:je,pickupEnabled:Re,onPickupEnabledChange:Le,phoneVisible:(()=>{const i=X.find(h=>h.id===q);return(i==null?void 0:i.show_phone_publicly)||!1})()})]}),f==="choose"&&a.length>0&&e.jsxs(n,{sx:{mt:4},children:[e.jsxs(n,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(ie,{fullWidth:!0,variant:"outlined",size:"large",onClick:()=>F("manual"),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:500,borderRadius:2},children:"Manuell weitermachen"}),e.jsx(ie,{fullWidth:!0,variant:"contained",size:"large",onClick:Ke,disabled:L||_<1,startIcon:L?e.jsx(he,{size:18,color:"inherit"}):e.jsx(te,{size:18}),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:600,borderRadius:2,boxShadow:2},children:L?"Generiere mit KI...":"Mit KI erzeugen"})]}),e.jsx(n,{sx:{mt:2,p:1.5,bgcolor:"rgba(25, 118, 210, 0.04)",borderRadius:1,border:"1px solid",borderColor:"rgba(25, 118, 210, 0.2)"},children:e.jsx(T,{control:e.jsx(es,{checked:y,onChange:i=>B(i.target.checked),size:"small"}),label:e.jsxs(n,{children:[e.jsx(o,{variant:"body2",sx:{fontWeight:500},children:"Gleich ver√∂ffentlichen"}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"Nach KI-Generierung direkt ver√∂ffentlichen"})]}),sx:{m:0}})})]})]}),f==="manual"&&e.jsxs(Xe,{sx:{borderRadius:3,overflow:"hidden"},children:[e.jsxs(n,{sx:{p:3},children:[e.jsx(o,{variant:"h6",fontWeight:600,gutterBottom:!0,sx:{mb:3},children:"Artikelinformationen"}),e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(me,{defaultExpanded:!0,elevation:0,sx:{border:"1px solid",borderColor:"divider","&:before":{display:"none"}},children:[e.jsx(xe,{expandIcon:e.jsx(ge,{size:20}),sx:{bgcolor:"rgba(25, 118, 210, 0.04)","&:hover":{bgcolor:"rgba(25, 118, 210, 0.08)"}},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Ye,{size:20,color:"#1976d2"}),e.jsx(o,{fontWeight:600,children:"Grundinformationen"})]})}),e.jsx(fe,{sx:{p:3},children:e.jsx(Us,{title:le,description:ce,price:de,category:us,brand:ps,condition:xs,tags:bs,priceNegotiable:O,isFree:ne,priceOnRequest:_e,duration:re,onTitleChange:Ie,onDescriptionChange:we,onPriceChange:Ae,onCategoryChange:gs,onBrandChange:ms,onConditionChange:fs,onTagsChange:_s,onPriceNegotiableChange:g,onIsFreeChange:be,onPriceOnRequestChange:rs,onDurationChange:je,isMobile:j,hideExtendedSettings:!0})})]}),e.jsxs(me,{elevation:0,sx:{border:"1px solid",borderColor:"divider","&:before":{display:"none"}},children:[e.jsx(xe,{expandIcon:e.jsx(ge,{size:20}),sx:{bgcolor:"rgba(156, 39, 176, 0.04)","&:hover":{bgcolor:"rgba(156, 39, 176, 0.08)"}},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(ue,{size:20,color:"#9c27b0"}),e.jsx(o,{fontWeight:600,children:"Details (Optional)"})]})}),e.jsx(fe,{sx:{p:3},children:e.jsx(et,{size:js,weight:ys,dimensionsLength:Ss,dimensionsWidth:vs,dimensionsHeight:ws,material:Es,colors:Ps,style:Bs,serialNumber:Ds,onSizeChange:Cs,onWeightChange:ks,onDimensionsChange:(i,h,r)=>{zs(i),Is(h),As(r)},onMaterialChange:Ws,onColorsChange:Fs,onStyleChange:Ms,onSerialNumberChange:Ns,isMobile:j})})]})]})]}),e.jsxs(n,{sx:{p:3,pt:0},children:[e.jsx(n,{sx:{mb:2,p:1.5,bgcolor:"rgba(25, 118, 210, 0.04)",borderRadius:1,border:"1px solid",borderColor:"rgba(25, 118, 210, 0.2)"},children:e.jsx(T,{control:e.jsx(es,{checked:y,onChange:i=>B(i.target.checked),size:"small"}),label:e.jsxs(n,{children:[e.jsx(o,{variant:"body2",sx:{fontWeight:500},children:"Gleich ver√∂ffentlichen"}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"Inserat direkt online stellen (sonst als Entwurf speichern)"})]}),sx:{m:0}})}),e.jsxs(n,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(ie,{fullWidth:!0,variant:"outlined",size:"large",onClick:Ke,disabled:L,startIcon:L?e.jsx(he,{size:18,color:"inherit"}):e.jsx(te,{size:18}),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:500,borderRadius:2},children:L?"Generiere mit KI...":"Mit KI erzeugen"}),e.jsx(ie,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>$e(),disabled:oe||!le||!ce||!de,startIcon:oe?e.jsx(he,{size:18,color:"inherit"}):e.jsx(it,{size:18}),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:600,borderRadius:2},children:oe?"Speichere...":y?"Ver√∂ffentlichen":"Als Entwurf speichern"})]})]})]})]})};export{xt as ItemCreatePage};
